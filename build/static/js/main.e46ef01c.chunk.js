(this.webpackJsonpthe=this.webpackJsonpthe||[]).push([[0],{20:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(1),a=t.n(c),r=t(15),u=t.n(r),o=(t(20),t(6)),i=t(3),s=t(0),l=function(e){var n=e.text,t=e.search,c=e.updateSearch;return Object(s.jsxs)("div",{children:[n," ",Object(s.jsx)("input",{value:t,onChange:c})]})},d=function(e){var n=e.name,t=e.number,c=e.onClick;return Object(s.jsx)("div",{children:Object(s.jsxs)("li",{children:[n," ",t," ",Object(s.jsx)("button",{onClick:c,children:"delete"})]})})},b=function(e){var n=e.name,t=e.value,c=e.onChange;return Object(s.jsxs)("div",{children:[n,Object(s.jsx)("input",{value:t,onChange:c})]})},m=function(e){var n=e.newName,t=e.newNumber,c=e.handlenewName,a=e.handlenewNumber,r=e.addName,u=e.name,o=e.number;return Object(s.jsxs)("form",{onSubmit:r,children:[Object(s.jsx)(b,{name:u,value:n,onChange:c}),Object(s.jsx)(b,{name:o,value:t,onChange:a}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})},j=t(4),f=t.n(j),h="http://localhost:3001/api/persons",O=function(){return f.a.get(h).then((function(e){return e.data}))},v=function(e){return f.a.post(h,e).then((function(e){return e.data}))},x=function(e,n){return f.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){f.a.delete("".concat(h,"/").concat(e))},w=function(e){var n=e.message;return null===n?null:Object(s.jsx)("div",{className:"success",children:n})},g=function(e){var n=e.message;return null===n?null:Object(s.jsx)("div",{className:"error",children:n})},N=function(){Object(c.useEffect)((function(){console.log("effect"),O().then((function(e){return a(e)})).catch((function(e){return console.log(e)}))}),[]);var e=Object(c.useState)([{name:"Arto Hellas",number:"040-123456"},{name:"Ada Lovelace",number:"39-44-5323523"},{name:"Dan Abramov",number:"12-43-234345"},{name:"Mary Poppendieck",number:"38-23-6423122"}]),n=Object(i.a)(e,2),t=n[0],a=n[1],r=Object(c.useState)(""),u=Object(i.a)(r,2),b=u[0],j=u[1],f=Object(c.useState)(""),h=Object(i.a)(f,2),N=h[0],C=h[1],S=Object(c.useState)(""),k=Object(i.a)(S,2),y=k[0],A=k[1],L=Object(c.useState)(null),M=Object(i.a)(L,2),T=M[0],D=M[1],E=Object(c.useState)(null),I=Object(i.a)(E,2),J=I[0],P=I[1],B=t.map((function(e){return e.name})),H=t.filter((function(e){return-1!==e.name.toLowerCase().indexOf(y.toLowerCase())}));return Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"Phonebook"}),Object(s.jsx)(w,{message:T}),Object(s.jsx)(g,{message:J}),Object(s.jsx)(l,{text:"filter shown with",search:y,updateSearch:function(e){A(e.target.value)}}),Object(s.jsx)("h2",{children:"Add a new"}),Object(s.jsx)(m,{addName:function(e){e.preventDefault();var n={name:b,number:N};if(B.includes(b))if(window.confirm("".concat(b," is already added to phonebook, replace the old number with new one?"))){var c=t.find((function(e){return e.name===b})),r=Object(o.a)(Object(o.a)({},c),{},{number:N});console.log(c.id),x(c.id,r).then((function(e){a(t.map((function(n){return n.id!==c.id?n:e}))),D("Added ".concat(b)),setTimeout((function(){D(null)}),5e3)})).catch((function(e){console.log(e),P("Information of ".concat(b," has already been removed from server")),setTimeout((function(){P(null),j(b),C("-")}),5e3),a(t.filter((function(e){return e.id!==c.id})))})),j(""),C("")}else j(""),C("");else v(n).then((function(e){return a(t.concat(e))})),D("Added ".concat(b)),setTimeout((function(){D(null)}),5e3),j(""),C("")},newName:b,newNumber:N,handlenewName:function(e){j(e.target.value)},handlenewNumber:function(e){C(e.target.value)},name:"name : ",number:"number : "}),Object(s.jsx)("h2",{children:"Numbers"}),H.map((function(e){return Object(s.jsx)(d,{name:e.name,number:e.number,onClick:function(){return function(e){if(window.confirm("Are you sure, you want to delete ".concat(e.name))){console.log("it works!!!"),p(e.id);var n=H.filter((function(n){return n.id!==e.id}));a(n)}console.log(t)}(e)}},Math.random())}))]})};u.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(N,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.e46ef01c.chunk.js.map