{"version":3,"sources":["components/Filter.js","components/Person.js","components/InputForm.js","components/PersonForm.js","services/Persons.js","components/Success.js","components/ErrorMessage.js","App.js","index.js"],"names":["Filter","text","search","updateSearch","value","onChange","Person","name","number","onClick","InputForm","PersonForm","newName","newNumber","handlenewName","handlenewNumber","addName","onSubmit","type","baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Success","message","className","ErrorMessage","App","useEffect","console","log","personService","allPersons","setPersons","catch","error","useState","persons","setNewName","setNewNumber","setSearchs","successMessage","setSuccessMessage","errorMessage","setErrorMessage","name_array","map","person","filter_persons","filter","toLowerCase","indexOf","event","target","preventDefault","newObj","includes","window","confirm","already_name","find","new_Obj","new_data","setTimeout","newPerson","concat","er","JSON","stringify","filter_persons2","deletePerson","Math","random","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.cbca53d0.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Filter = ({ text, search, updateSearch }) => {\n  return (\n    <div>\n      {text} <input value={search} onChange={updateSearch} />\n    </div>\n  );\n};\n\nexport default Filter;\n","import React from \"react\";\n\nconst Person = ({ name, number, onClick }) => {\n  return (\n    <div>\n      <li>\n      {name} {number} <button onClick={onClick}>delete</button>\n      </li>\n    </div>\n  );\n};\n\nexport default Person;\n","import React from \"react\";\n\nconst InputForm = ({ name, value, onChange }) => {\n  return (\n    <div>\n      {name}\n      <input value={value} onChange={onChange} />\n    </div>\n  );\n};\n\nexport default InputForm;\n","import React from \"react\";\nimport InputForm from \"./InputForm\";\n\nconst PersonForm = ({\n  newName,\n  newNumber,\n  handlenewName,\n  handlenewNumber,\n  addName,\n  name,\n  number,\n}) => {\n  return (\n    <form onSubmit={addName}>\n      <InputForm name={name} value={newName} onChange={handlenewName} />\n      <InputForm name={number} value={newNumber} onChange={handlenewNumber} />\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonForm;\n","import axios from 'axios'\n\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\nconst deletePersons = id=>{\n  axios.delete(`${baseUrl}/${id}`)\n}\n\nexport default {  getAll, create, update, deletePersons }","const Success = ({message})=>{\n    if (message === null){\n        return null\n    }\n\n    return (\n        <div className=\"success\">\n            {message}\n        </div>\n    )\n}\n\nexport default Success","const ErrorMessage = ({message})=>{\n    if (message === null){\n        return null\n    }\n\n    return (\n        <div className=\"error\">\n            {message}\n        </div>\n    )\n}\n\nexport default ErrorMessage","import React, { useState, useEffect } from \"react\";\nimport Filter from \"./components/Filter\";\nimport Person from \"./components/Person\";\nimport PersonForm from \"./components/PersonForm\";\nimport personService from \"./services/Persons\"\nimport Success from \"./components/Success\"\nimport ErrorMessage from \"./components/ErrorMessage\"\nconst App = () => {\n\n  useEffect(() => {\n    console.log('effect')\n    personService \n    .getAll()\n    .then(allPersons=>\n      setPersons(allPersons))\n    .catch(error => console.log(error));\n      \n  }, [])\n\n  // creating person hook\n  const [ persons, setPersons ] = useState([\n    { name: 'Arto Hellas', number: '040-123456' },\n    { name: 'Ada Lovelace', number: '39-44-5323523' },\n    { name: 'Dan Abramov', number: '12-43-234345' },\n    { name: 'Mary Poppendieck', number: '38-23-6423122' }\n  ]) \n\n\n  // creating states for name, number and search\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [search, setSearchs] = useState(\"\");\n\n  //Creating success hook\n  const[ successMessage, setSuccessMessage] = useState(null)\n //creating error hook\n const[ errorMessage, setErrorMessage] = useState(null)\n\n  const name_array = persons.map((person) => person.name);\n\n  // event handler for adding name\n  const handleNewName = (event) => {\n      setNewName(event.target.value);\n    }\n\n\n  // event handler for adding number\n  const handleNewNumber = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  // event handler for updating search parameter\n  const updateSearch = (event) => {\n    setSearchs(event.target.value);\n  };\n\n  // adding new person to the person list\n  const addName = (event) => {\n    event.preventDefault();\n\n    const newObj = {\n      name: newName,\n      number: newNumber,\n    };\n    if (name_array.includes(newName)){\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with new one?`)) {\n        const already_name =persons.find(name=>name.name === newName)\n        const new_Obj = {...already_name, number : newNumber}\n        console.log(already_name.id)\n        personService\n        .update(already_name.id, new_Obj)\n        .then(new_data=>{\n          setPersons(persons.map(person=> person.id!==already_name.id ? person : new_data))\n          setSuccessMessage(`Added ${newName}`)\n          setTimeout(()=>{\n            setSuccessMessage(null)\n          },5000)\n        })\n        .catch(error=>{\n          console.log(error)\n          setErrorMessage(`Information of ${newName} has already been removed from server`)\n            setTimeout(()=>{\n              setErrorMessage(null)\n              setNewName(newName)\n              setNewNumber(\"-\")\n            },5000)\n            setPersons(persons.filter(person=> person.id!== already_name.id ))\n        })\n        setNewName(\"\")\n        setNewNumber(\"\")\n      }else{\n        setNewName(\"\")\n        setNewNumber(\"\")\n      }\n\n    }\n    else{ \n    personService\n    .create(newObj)\n    .then(newPerson=>{\n      setPersons(persons.concat(newPerson))\n      \n      setSuccessMessage(`Added ${newName}`)\n          setTimeout(()=>{\n            setSuccessMessage(null)\n          },5000)\n        })\n        .catch(error=> {\n          let er = `${JSON.stringify(error.response.data.error)}`\n         setErrorMessage(er)\n         console.log(`error message${JSON.stringify(error.response)}`)\n         \n       setTimeout(()=>{\n         setErrorMessage(null)\n       },5000)\n     })\n    setNewName(\"\")\n    setNewNumber(\"\")\n  };\n}\n  //creating a function for delete person\n  const deletePerson =(event)=>{\n    if (window.confirm(`Are you sure, you want to delete ${event.name}`)) {\n      console.log('it works!!!');\n      personService\n      .deletePersons(event.id)\n      let filter_persons2 = filter_persons.filter(person=> person.id !== event.id)\n      setPersons(filter_persons2)\n\n    }\n    console.log(persons)\n  }\n\n  let filter_persons = persons.filter(\n    (person) => person.name.toLowerCase().indexOf(search.toLowerCase()) !== -1\n  );\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Success message={successMessage}/>\n      <ErrorMessage message={errorMessage}/> \n      <Filter\n        text={\"filter shown with\"}\n        search={search}\n        updateSearch={updateSearch}\n      />\n\n      <h2>Add a new</h2>\n\n      <PersonForm\n        addName={addName}\n        newName={newName}\n        newNumber={newNumber}\n        handlenewName={handleNewName}\n        handlenewNumber={handleNewNumber}\n        name={\"name : \"}\n        number={\"number : \"}\n      />\n      <h2>Numbers</h2>\n      {filter_persons.map((person) => (\n        <Person key={Math.random()} name={person.name} number={person.number} onClick={()=>deletePerson(person)}/>\n      ))}\n    </div>\n  );\n};\n\nexport default App;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}